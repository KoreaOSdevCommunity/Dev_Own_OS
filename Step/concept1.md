1 | 세그멘테이션

세그멘테이션은 간단하게 이렇게 생각하면 된다. 물리적 메모리가 있다고 하면 그 물리적 메모리를 각각 다른 크기로 잘라서 사용하는 것을 말한다. 이것은 페이징과는 매우 다른데, 그 이유는 이것이다. 페이징은 물리적 메모리를 같은 크기로 일정하게 잘라서 관리하는 반면에 세그멘테이션은 같은 크기로 자르지 않고 다른 크기로 잘라서 관리하기 때문이다. 그럼 여기서 하나의 질문이 생긴다. 이제 운영체제 개발을 시작하는데 왜 이 세그멘테이션부터 설명을 시작하는걸까? 왜냐하면 운영체제를 처음 개발할 때 가장 중요한 부트로더를 개발해야 하기 때문이다. 부트로더는 16비트이고, 16비트는 세그멘테이션을 사용해서 메모리를 관리하기 때문에 세그멘테이션부터 설명을 하려 하는 것이다.

자, 그럼 이제부터 본론으로 들어가서 16비트의 세그멘테이션은 어떻게 작동하는지를 간단하게 설명하겠다

16비트에서의 세그멘테이션은 이런식으로 작동한다. 메모리에 접근을 하려 할 때 각각의 세그먼트를 정해 그 세그먼트에 16을 곱한 뒤 오프셋을 더해서 물리 주소를 만드는데, 이것은 이렇게 표현될 수 있다:

P = (16\*S)+O

(단, 여기서 P는 물리적 주소이고 S는 세그먼트, O는 오프셋이다)

예를 들어보자, 세그먼트가 0x10이고 오프셋은 0x400이라고 해보자. 이렇게 했을 때에 물리 주소는 0x10\*16+0x400 = 0x100+0x400 = 0x500이 된다.

지금까지는 16비트에서의 메모리 관리기법, 세그멘테이션을 설명했고 다음 장에는 이 세그멘테이션을 부트로더나 16비트 커널에서는 어떻게 다루는지를 레지스터라는 계념과 병행해 설명해보겠다
